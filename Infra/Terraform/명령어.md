
### init 
Terraform에서 terraform init 명령어는 작업 디렉토리를 초기화하여 Terraform 구성을 준비하는 데 사용됩니다. 이 명령어는 다음과 같은 작업을 수행합니다:

1. **백엔드 초기화**: 상태 파일을 저장하고 관리할 백엔드를 설정합니다. 이를 통해 Terraform은 인프라의 상태를 추적하고 관리할 수 있습니다.

2. **프로바이더 플러그인 설치**: 구성 파일에서 정의한 프로바이더(AWS, Azure 등)의 플러그인을 다운로드하고 설치합니다. 이를 통해 Terraform은 다양한 클라우드 서비스와 상호작용할 수 있습니다.

3. **모듈 다운로드**: 구성 파일에서 참조하는 모듈을 다운로드하여 작업 디렉토리에 저장합니다. 이를 통해 코드의 재사용성과 관리 효율성을 높일 수 있습니다.

  

terraform init은 새로운 구성 파일을 작성하거나 버전 관리 시스템에서 기존 구성을 복제한 후 가장 먼저 실행해야 하는 명령어입니다. 이 명령어는 여러 번 실행해도 안전하며, 실행할 때마다 현재 디렉토리를 최신 상태로 업데이트합니다.

  

추가로, -upgrade 옵션을 사용하면 프로바이더와 모듈을 최신 버전으로 업그레이드할 수 있습니다. 이 옵션은 .terraform.lock.hcl 파일에 기록된 버전 정보를 무시하고 최신 버전을 설치합니다.

  

요약하면, terraform init은 Terraform 작업 디렉토리를 초기화하고 필요한 플러그인과 모듈을 준비하여 다른 명령어(plan, apply 등)를 실행할 수 있도록 환경을 설정하는 중요한 역할을 합니다.

### plan

Terraform에서 terraform plan 명령어는 현재 작성된 구성 파일과 실제 인프라 상태를 비교하여 적용될 변경 사항을 미리 확인할 수 있게 해줍니다. 이를 통해 다음과 같은 작업을 수행합니다:

1. **현재 상태 읽기**: 기존에 생성된 리소스의 상태를 읽어와 최신 상태로 유지합니다.

2. **구성 파일과 비교**: 현재 상태와 작성된 구성 파일을 비교하여 차이점을 식별합니다.

3. **실행 계획 생성**: 생성, 수정, 삭제될 리소스에 대한 상세한 실행 계획을 출력합니다.

이러한 과정을 통해 실제로 변경을 적용하기 전에 예상되는 변경 사항을 검토할 수 있으며, 이를 통해 의도하지 않은 변경을 방지하고 인프라의 안정성을 유지할 수 있습니다.

예를 들어, 다음과 같이 terraform plan 명령어를 실행할 수 있습니다:

$ terraform plan

이 명령어를 실행하면 Terraform은 현재 상태와 구성 파일을 비교하여 어떤 리소스가 생성, 수정, 삭제될지에 대한 상세한 정보를 제공합니다.

또한, -out 옵션을 사용하여 실행 계획을 파일로 저장할 수 있습니다:

$ terraform plan -out=plan.tfplan

이렇게 생성된 실행 계획 파일은 나중에 terraform apply 명령어와 함께 사용하여 저장된 계획대로 인프라를 적용할 수 있습니다:

$ terraform apply "plan.tfplan"

이러한 기능을 통해 terraform plan은 인프라 변경 사항을 사전에 검토하고, 팀원들과 공유하며, 자동화된 파이프라인에서 안전하게 변경을 적용하는 데 중요한 역할을 합니다


### apply

Terraform에서 terraform apply 명령어는 작성한 구성 파일에 따라 실제 인프라를 생성, 수정, 삭제하는 작업을 수행합니다. 이 명령어는 다음과 같은 단계를 거칩니다:

1. **실행 계획 생성 및 표시**: terraform apply를 실행하면 Terraform은 현재 상태와 구성 파일을 비교하여 실행 계획을 생성하고, 어떤 리소스가 추가, 변경, 삭제될지 상세히 보여줍니다.

2. **사용자 승인 요청**: 생성된 실행 계획을 사용자에게 보여주고, 이를 적용할지 여부를 묻습니다. 사용자가 ‘yes’라고 입력하면 다음 단계로 진행합니다.

3. **변경 사항 적용**: 사용자의 승인을 받으면 Terraform은 실행 계획에 따라 실제 인프라에 변경 사항을 적용합니다.

  

이러한 과정을 통해 terraform apply는 코드로 정의한 인프라 구성을 실제 환경에 반영합니다.

  

**주요 옵션:**

• -auto-approve: 이 옵션을 사용하면 사용자 승인 없이 자동으로 변경 사항을 적용합니다. 자동화된 스크립트나 CI/CD 파이프라인에서 유용하게 사용됩니다.

• -target=리소스주소: 특정 리소스나 모듈만 선택적으로 적용할 수 있습니다.


**참고사항:**

• terraform apply를 실행하기 전에 terraform plan을 통해 예상되는 변경 사항을 검토하는 것이 좋습니다. 이를 통해 의도하지 않은 변경을 방지할 수 있습니다.

• terraform apply는 기본적으로 현재 디렉토리의 구성 파일을 기준으로 실행 계획을 생성합니다. 이전에 저장한 실행 계획 파일이 있다면, 해당 파일을 인자로 전달하여 동일한 계획을 적용할 수 있습니다.
```zsh
terraform apply "plan.tfplan"
```

### destroy

**참고사항:**

Terraform의 terraform destroy 명령어는 현재 구성 파일로 관리되는 모든 인프라 리소스를 제거하는 데 사용됩니다. 이 명령어를 실행하면 Terraform은 상태 파일(terraform.tfstate)을 참조하여 관리 중인 모든 리소스를 삭제합니다. 이때, 삭제할 리소스 목록과 세부 정보가 표시되며, 사용자의 확인을 거쳐 삭제가 진행됩니다.


**삭제 범위:**

• **관리되는 리소스**: terraform destroy는 현재 Terraform 구성 파일과 상태 파일에서 관리하는 모든 리소스를 삭제합니다. 예를 들어, AWS에서 Terraform으로 생성한 EC2 인스턴스, S3 버킷 등이 이에 해당합니다.

• **관리되지 않는 리소스**: Terraform이 관리하지 않는, 수동으로 생성되었거나 다른 방법으로 생성된 리소스는 삭제되지 않습니다. 따라서, 수동으로 생성한 리소스나 다른 Terraform 프로젝트에서 관리하는 리소스는 영향을 받지 않습니다.
  

**주의사항:**
• **데이터 손실 위험**: terraform destroy를 실행하면 해당 리소스에 저장된 모든 데이터가 삭제될 수 있으므로, 중요한 데이터를 백업한 후 실행하는 것이 좋습니다.

• **선택적 삭제**: 특정 리소스만 삭제하려면 -target 옵션을 사용하여 원하는 리소스만 선택적으로 삭제할 수 있습니다.

• **자동 승인 옵션**: 명령어 실행 시 사용자 확인을 생략하려면 -auto-approve 옵션을 사용할 수 있습니다. 그러나 이 옵션은 신중하게 사용해야 합니다.

terraform destroy 명령어는 개발 환경에서 임시로 생성한 리소스를 정리하거나, 테스트 후 인프라를 제거할 때 유용하게 사용됩니다. 그러나 프로덕션 환경에서는 신중하게 사용해야 하며, 삭제 전에 반드시 백업과 검토 과정을 거치는 것이 좋습니다.